import{N as b,u as x}from"./NewsItem.DQVmb_l0.js";import{j as P,a as u,b as E,k as m,Q as p,L as n,R as v,u as t,$ as f,N as $,Y as s,aa as L,P as d,J as q,a6 as z,W as j,ab as D,af as S,ai as k,ac as F,a7 as J}from"./swiper-vue.CkSI7WQq.js";import{_ as O}from"./icon-arrow-broken.BlCRplVY.js";import{_ as M}from"./entry.Cc3JA-P7.js";import"./date.DbBvCIQb.js";import"./VIcon.vue.DPjwTbDF.js";const Q=P({__name:"NewsSlider",props:{initSlides:{type:Array,required:!0},length:{type:Number,required:!0}},setup(y){const a=u(null),_=u(null),l=y,c=u(l.initSlides),o=u(1),i=e=>{o.value=e.activeIndex+1},{fetchNews:r}=x();E(o,async()=>{if(!N.value&&w.value-o.value<3){const{data:e}=await r(B.value,C.value);c.value=[...c.value,...e.value.results]}});const w=m(()=>c.value.length),B=m(()=>Math.floor((w.value/6+1)%Math.ceil(l.length/6+1))),C=m(()=>l.length-w.value>6?6:l.length-w.value),N=m(()=>o.value+2>=l.length);return(e,ce)=>{const V=F,A=L,g=O;return d(),p("div",{class:s(e.$style.NewsSlider)},[n(A,{modules:["SwiperNavigation"in e?e.SwiperNavigation:t(D)],navigation:{nextEl:t(a),prevEl:t(_)},breakpoints:{0:{slidesPerView:1},767:{slidesPerView:"auto"},1024:{slidesPerView:3}},onSlideChange:i},{default:v(()=>[(d(!0),p(q,null,z(t(c),(h,I)=>(d(),j(V,{key:h.id,"virtual-index":I,class:s(e.$style.slide)},{default:v(()=>[n(b,{item:h,class:s(e.$style.card)},null,8,["item","class"])]),_:2},1032,["virtual-index","class"]))),128))]),_:1},8,["modules","navigation"]),f("div",{class:s(e.$style.controls)},[n($,{name:"fade-fast"},{default:v(()=>[S(f("button",{ref_key:"prev",ref:_,type:"button",class:s([e.$style.button,e.$style.previous])},[n(g,{class:s(e.$style.arrow)},null,8,["class"])],2),[[k,t(o)>1]])]),_:1}),n($,{name:"fade-fast"},{default:v(()=>[S(f("button",{ref_key:"next",ref:a,type:"button",class:s([e.$style.button,e.$style.next])},[n(g,{class:s(e.$style.arrow)},null,8,["class"])],2),[[k,!t(N)]])]),_:1})],2)],2)}}}),R="_NewsSlider_1x2fm_8",T="_slide_1x2fm_12",W="_slider_1x2fm_27",Y="_button_1x2fm_32",G="_arrow_1x2fm_50",H="_controls_1x2fm_55",K="_next_1x2fm_63",U="_previous_1x2fm_73",X="_card_1x2fm_87",Z={NewsSlider:R,slide:T,slider:W,button:Y,arrow:G,controls:H,next:K,previous:U,card:X},ee={$style:Z},se=M(Q,[["__cssModules",ee]]),te=P({__name:"index",async setup(y){let a,_;const l=u(1),c=u(6),{fetchNews:o}=x(),{data:i}=([a,_]=J(()=>o(l.value,c.value)),a=await a,_(),a);return(r,w)=>(d(),p("div",{class:s([r.$style.NewsPage,"container_wide"])},[!t(i)||!t(i).results.length?(d(),p("div",{key:0,class:s([r.$style.notNews,"h1"])}," Новостей нет ",2)):(d(),p("div",{key:1,class:s(r.$style.news)},[f("h1",{class:s(["h1",r.$style.title])},"Новости",2),n(b,{"is-wide":"",item:t(i).results[0],class:s(r.$style.wide)},null,8,["item","class"]),n(se,{"init-slides":t(i).results,length:t(i).count},null,8,["init-slides","length"])],2))],2))}}),ne="_NewsPage_knpi6_8",ae="_title_knpi6_23",le="_notNews_knpi6_27",oe="_wide_knpi6_31",ie={NewsPage:ne,title:ae,notNews:le,wide:oe},re={$style:ie},ve=M(te,[["__cssModules",re]]);export{ve as default};
